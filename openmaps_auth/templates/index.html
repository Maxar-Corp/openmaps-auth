{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block body %}
{% if request.user.is_authenticated %}
<div class="hub-menu">
  <div class="hub-brand">
    <img src="{% static 'img/vantor_h_w.svg' %}" alt="Vantor" />
  </div>
  <div class="hub-user">
    <span>Logged in as {{ request.user.email }}</span>
    <a href="{% url 'openmaps_logout' %}">{% translate "Log out" %}</a>
  </div>
  <div class="hub-welcome-banner">
    <h1>Welcome to {{ openmaps_auth.title }}!</h1>
  </div>
  <div class="hub-menu-content">
    <div class="hub-menu-title">
      {% block app_heading %}<h1 id="default_title" data-name="Featured Applications">Featured Applications</h1>{% endblock app_heading %}
      <p id="featured_application_description" class="hover_text"></p>
    </div>
    {% block messages %}
    {% if messages %}
    <div class="hub-message-container">
      <ul class="messagelist">
        {% for message in messages %}
          <li {% if message.tags %}class="{{ message.tags }}"{% endif %}>{{ message|capfirst }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
    {% endblock messages %}
    {% block center %}
    <div class="center_section">
      <div class="section">
        {% for app_link in openmaps_auth.app_links %}
        {% with  "img/"|add:app_link.text|cut:" "|add:".svg" as svg_src %}
          <div class="container_spacing">
            <article data-name="{{ app_link.text }}" data-description="{{ app_link.description }}" onmouseover=addtext(this) onmouseout=removetext()>
              <div class="app_card">
                <a class="image_holder app_img img_container size" href="{{ app_link.link }}" target="{{ app_link.target|default:'_blank' }}">
                  <img src="{% static svg_src %}" class="show-icon" viewBox="-25 -25 100 100">
                  <use class="material-symbols-outlined" href="#{{ app_link.text }}"></use>
                </a>
                <a class="app_img img_container size underline">
                  {{ app_link.text }}
                </a>
              </div>
            </article>
          </div>
        {% endwith %}
        {% endfor %}
      </div>
    </div>
    {% endblock center %}
  </div>
</div>
{% else %}
<div class="hub-landing">
  <div class="hub-brand">
    <img src="{% static 'img/vantor_h_w.svg' %}" alt="Vantor" />
  </div>
  <div class="hub-card">
    <h1>Welcome to {{ openmaps_auth.title }}!</h1>
    <p>Please login to access the full suite of applications</p>
    <a class="hub-primary-button" href="{% url 'openmaps_login' %}">Next -></a>
  </div>
</div>
{% endif %}
{% endblock body %}
